<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algo-Rythmn.ai - Potash Mining Proposal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <style>
        :root {
            --primary-color: #0f172a;
            --primary-light: #1e293b;
            --secondary-color: #088b5d;
            --secondary-light: #34d399;
            --accent-color: #09523b;
            --accent-light: #6ee7b7;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --light-bg: #f8fafc;
            --card-bg: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --border-color: #e2e8f0;
            --gradient-primary: linear-gradient(135deg, #0f172a 0%, #059669 50%, #10b981 100%);
            --gradient-accent: linear-gradient(135deg, #10b981 0%, #059669 100%);
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            /* Legacy compatibility */
            --primary: #10b981;
            --secondary: #059669;
            --accent: #f59e0b;
            --light: #f8fafc;
            --dark: #0f172a;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --primary-dark: #047857;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            background-attachment: fixed;
            color: var(--text-primary);
            line-height: 1.7;
            font-weight: 400;
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        
        .navbar {
            background: var(--gradient-primary);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 0rem 0 0 0; /* Minimal padding - no bottom space */
        }
        
        .navbar .container {
            max-width: 1400px;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.75rem;
            letter-spacing: -0.025em;
            color: white !important;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-nav .nav-link {
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            margin: 0 0.7rem;
            padding: 0rem 0rem 0rem 0rem !important; /* Reduced bottom padding */
            border-radius: 0.5rem;
            color: rgba(255, 255, 255, 0.9) !important;
        }
        
        .navbar-nav .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
            color: white !important;
        }
        
        .navbar-nav .nav-link.active {
            color: white !important;
        }
        
        .navbar-nav .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 24px;
            height: 2px;
            background: var(--accent-light);
            border-radius: 1px;
        }
        
        .hero-section {
            background: var(--gradient-primary);
            color: white;
            padding: 5rem 0 4rem 0;
            margin-bottom: 4rem;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(16, 185, 129, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 50%, rgba(5, 150, 105, 0.2) 0%, transparent 50%);
            pointer-events: none;
        }
        
        .hero-section h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
            letter-spacing: -0.03em;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            animation: slideInDown 0.8s ease-out;
            line-height: 1.2;
        }
        
        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .hero-section .lead {
            animation: slideInUp 0.8s ease-out 0.2s both;
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .hero-section .subtitle {
            font-size: 1.35rem;
            opacity: 0.95;
            max-width: 850px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
            line-height: 1.6;
            font-weight: 400;
            font-family: 'Poppins', sans-serif;
        }
        
        .btn-hero {
            background: linear-gradient(135deg, #da953c 0%, #ff9901 100%);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-weight: 700;
            padding: 1.1rem 2.8rem;
            border-radius: 50px;
            font-size: 1.15rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(243, 190, 43, 0.3);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
            animation: slideInUp 0.8s ease-out 0.4s both;
        }
        
        .btn-hero::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn-hero:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .btn-hero:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 40px rgba(221, 169, 73, 0.4);
            color: white;
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .btn-hero i {
            position: relative;
            z-index: 1;
        }
        
        .btn-hero span {
            position: relative;
            z-index: 1;
        }
        
        .container {
            max-width: 1550px;
            margin: 0 auto;
            padding: 10px 50px;
        }
        
        .solution-section {
            margin-bottom: 4rem;
        }
        
        .tabs {
            display: flex;
            background: white;
            border-radius: 16px;
            padding: 10px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            margin-bottom: 40px;
            gap: 10px;
            border: 1px solid var(--border-color);
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 20px 28px;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            color: var(--text-secondary);
            background: transparent;
            font-size: 1.2rem;
            border: 2px solid transparent;
            position: relative;
        }
        
        .tab:hover {
            background-color: var(--light-bg);
            color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .tab.active {
            color: white;
            background: var(--gradient-accent);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .tab-content {
            display: none;
            background-color: white;
            border-radius: 20px;
            padding: 45px;
            box-shadow: 0 20px 50px -10px rgba(0, 0, 0, 0.15), 0 0 25px rgba(16, 185, 129, 0.08);
            margin-bottom: 40px;
            border: 1px solid rgba(16, 185, 129, 0.15);
        }
        
        .tab-content.active {
            display: block;
            animation: fadeInScale 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes fadeIn {
            from { 
                opacity: 0;
                transform: translateY(10px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInScale {
            from { 
                opacity: 0;
                transform: translateY(20px) scale(0.98);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .solution-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 4px solid transparent;
            border-image: linear-gradient(90deg, var(--secondary-color) 0%, transparent 100%);
            border-image-slice: 1;
            position: relative;
        }
        
        .solution-header::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 120px;
            height: 4px;
            background: var(--gradient-accent);
            border-radius: 2px;
        }
        
        .solution-title {
            font-size: 2.5rem;
            color: var(--secondary-color);
            font-weight: 800;
            letter-spacing: -0.025em;
            line-height: 1.2;
        }
        
        .overview {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(5, 150, 105, 0.08) 100%);
            border-left: 6px solid var(--secondary-color);
            padding: 25px;
            border-radius: 0 16px 16px 0;
            margin-bottom: 40px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .overview::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(16, 185, 129, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .overview:hover::before {
            left: 100%;
        }
        
        .overview:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }
        
        .overview-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--secondary-color);
            font-weight: 700;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
            padding: 0px 0;
        }
        
        /* Solution 3 specific styles */
        #solution3 .dashboard {
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 100%;
            margin: 0 auto 20px auto;
        }
        
        #solution3 .dashboard .chart-container {
            padding: 35px;
            min-height: 500px; /* Increased height for better visualization */
        }
        
        #solution3 .dashboard .chart-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
        }
        
        /* Multi-agent system visualization */
        #multiAgentChartContainer {
            position: relative;
            border-radius: 18px;
            background:
                radial-gradient(circle at 20% 20%, rgba(16, 185, 129, 0.12), transparent 55%),
                radial-gradient(circle at 80% 15%, rgba(59, 130, 246, 0.12), transparent 60%),
                #f8fafc;
            min-height: 460px;
            overflow: hidden;
        }

        #multiAgentChartContainer::after {
            content: '';
            position: absolute;
            inset: 16px;
            border: 1px dashed rgba(15, 23, 42, 0.08);
            border-radius: 16px;
            pointer-events: none;
        }

        .multi-agent-legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin-top: 18px;
        }

        .multi-agent-legend .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 999px;
            background: rgba(226, 232, 240, 0.4);
            border: 1px solid rgba(148, 163, 184, 0.4);
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .multi-agent-legend .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .agent-ring-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            fill: rgba(71, 85, 105, 0.8);
        }

        .agent-node {
            transition: transform 0.25s ease;
        }

        .agent-node circle {
            transition: r 0.2s ease, filter 0.2s ease;
        }

        .multi-agent-tooltip {
            position: absolute;
            background: white;
            border-radius: 12px;
            padding: 14px 16px;
            box-shadow: 0 12px 30px rgba(15, 23, 42, 0.18);
            border-left: 4px solid var(--secondary-color);
            pointer-events: none;
            max-width: 280px;
            font-size: 0.9rem;
        }

        .multi-agent-tooltip strong {
            color: var(--text-primary);
        }
        
        /* Responsive adjustments */
        @media (max-width: 992px) {
            #solution3 .dashboard {
                grid-template-columns: 1fr;
            }
            
            #solution3 .dashboard .chart-container {
                min-height: 400px;
            }
        }
        .chart-container {
            background: linear-gradient(to bottom, #ffffff 0%, #fafafa 100%);
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(16, 185, 129, 0.1);
            margin-bottom: 10px;
        }
        
        .chart-container:hover {
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
            transform: translateY(-3px);
        }
        
        .chart-title {
            font-size: 1.5rem;
            margin-bottom: 28px;
            color: var(--text-primary);
            font-weight: 700;
            letter-spacing: -0.015em;
            position: relative;
            padding-bottom: 15px;
        }
        
        .chart-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--gradient-accent);
            border-radius: 2px;
        }
        
        .kpi-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .kpi-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fffe 100%);
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
            border: 2px solid transparent;
            border-top: 6px solid var(--secondary-color);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.03) 0%, rgba(5, 150, 105, 0.03) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .kpi-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border-color: rgba(16, 185, 129, 0.3);
        }
        
        .kpi-card:hover::before {
            opacity: 1;
        }
        
        .kpi-value {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--secondary-color);
            margin: 20px 0;
            letter-spacing: -0.02em;
            position: relative;
            z-index: 1;
        }
        
        .kpi-label {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            position: relative;
            z-index: 1;
        }
        
        .potential-roi {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(5, 150, 105, 0.08) 100%);
            border-left: 6px solid var(--secondary-color);
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin-bottom: 25px;
            margin-top: 25px;
        }
        
        .potential-roi-title {
            font-size: 1.4rem;
            margin-bottom: 18px;
            color: var(--secondary-color);
            font-weight: 700;
        }
        
        .roi-list {
            margin-left: 25px;
            margin-bottom: 15px;
        }
        
        .roi-list li {
            margin-bottom: 12px;
            line-height: 1.7;
            font-size: 1.1rem;
        }
        
        .similar-applications {
            background-color: rgba(245, 158, 11, 0.06);
            border-left: 6px solid var(--warning-color);
            padding: 30px;
            border-radius: 0 12px 12px 0;
            margin-bottom: 25px;
        }
        
        .similar-applications-title {
            font-size: 1.4rem;
            margin-bottom: 18px;
            color: var(--warning-color);
            font-weight: 700;
        }
        
        .application-case {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 193, 7, 0.2);
        }
        
        .application-case:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .application-name {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 5px;
        }
        
        .application-description {
            font-size: 0.95rem;
            color: #6c757d;
        }
        
        .causal-graph-container {
            width: 100%;
            height: 550px;
            background-color: white;
            border-radius: 16px;
            margin: 25px 0;
            overflow: hidden;
            position: relative;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.1);
        }
        
        .graph-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 12px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            z-index: 10;
        }
        
        .graph-controls button {
            background: var(--gradient-accent);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 8px;
            cursor: pointer;
            margin: 0 5px;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .graph-controls button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
        }
        
        .graph-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: white;
            padding: 15px 22px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            z-index: 10;
            max-width: 320px;
            font-size: 0.95rem;
        }
        
        .node-info {
            background: white;
            border-radius: 12px;
            padding: 22px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: absolute;
            z-index: 100;
            max-width: 320px;
            display: none;
            border-left: 5px solid var(--secondary-color);
        }
        
        .node-info h4 {
            margin-bottom: 10px;
            color: var(--secondary-color);
        }
        
        .node-info p {
            margin-bottom: 5px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .ai-insights {
            background: linear-gradient(135deg, rgba(5, 150, 105, 0.08) 0%, rgba(16, 185, 129, 0.08) 100%);
            border-left: 6px solid var(--accent-color);
            padding: 30px;
            border-radius: 0 12px 12px 0;
            margin-top: 25px;
            margin-bottom: 25px;
            font-size: 1.1rem;
        }
        
        .ai-insights-title {
            font-size: 1.4rem;
            margin-bottom: 18px;
            color: var(--accent-color);
            font-weight: 700;
        }
        
        .insight-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(5, 150, 105, 0.15);
        }
        
        .insight-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .insight-text {
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .insight-impact {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-style: italic;
        }
        
        .query-interface {
            background-color: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
        }
        
        .query-select {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 18px;
            font-size: 1.1rem;
            background-color: var(--light-bg);
            transition: all 0.3s ease;
            height: auto;
            overflow-y: auto;
        }
        
        .query-select option {
            white-space: normal;
            word-wrap: break-word;
            overflow-wrap: break-word;
            padding: 12px 10px;
            line-height: 1.6;
            min-height: 50px;
            height: auto;
        }
        
        .query-select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        /* Custom dropdown for multi-line support */
        .custom-select-wrapper {
            position: relative;
            width: 100%;
            margin-bottom: 18px;
        }
        
        .custom-select-trigger {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 1.1rem;
            background-color: var(--light-bg);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 56px;
            line-height: 1.6;
            white-space: normal;
            word-wrap: break-word;
        }
        
        .custom-select-trigger:hover {
            border-color: var(--secondary-color);
        }
        
        .custom-select-trigger.open {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        
        .custom-select-trigger::after {
            content: '▼';
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-left: 12px;
            flex-shrink: 0;
        }
        
        .custom-select-trigger.open::after {
            content: '▲';
        }
        
        .custom-select-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: white;
            border: 2px solid var(--secondary-color);
            border-radius: 12px;
            margin-top: 4px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .custom-select-options.open {
            display: block;
        }
        
        .custom-option {
            padding: 1px 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid var(--border-color);
            white-space: normal;
            word-wrap: break-word;
            line-height: 1.6;
            font-size: 1.1rem;
        }
        
        .custom-option:last-child {
            border-bottom: none;
        }
        
        .custom-option:hover {
            background-color: rgba(16, 185, 129, 0.1);
        }
        
        .custom-option.selected {
            background-color: rgba(16, 185, 129, 0.15);
            font-weight: 500;
        }
        
        .response-area {
            background-color: var(--light-bg);
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
            min-height: 220px;
            border: 1px solid var(--border-color);
        }
        
        .response-title {
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--secondary-color);
            font-size: 1.3rem;
        }
        
        .response-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            font-size: 1.1rem;
        }
        
        .response-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            margin-bottom: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .response-table th, .response-table td {
            padding: 10px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .response-table th {
            background-color: rgba(16, 185, 129, 0.05);
            font-weight: 600;
        }
        
        .metric-highlight {
            background-color: rgba(16, 185, 129, 0.1);
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            color: var(--secondary-color);
        }
        
        .alert-container {
            background: linear-gradient(to bottom, #ffffff 0%, #fafafa 100%);
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            border: 1px solid rgba(16, 185, 129, 0.1);
            transition: all 0.3s ease;
        }
        
        .alert-container:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }
        
        .alert-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 15px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }
        
        .alert-table th, .alert-table td {
            padding: 18px 24px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .alert-table th {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(5, 150, 105, 0.08) 100%);
            font-weight: 700;
            color: var(--text-primary);
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.05em;
        }
        
        .alert-table tbody tr {
            transition: all 0.2s ease;
            background: white;
        }
        
        .alert-table tbody tr:nth-child(even) {
            background: rgba(248, 250, 252, 0.5);
        }
        
        .alert-table tbody tr:hover {
            background: rgba(16, 185, 129, 0.03);
            transform: scale(1.01);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .priority-high {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(220, 38, 38, 0.15) 100%);
            color: var(--danger-color);
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.8rem;
            border: 1.5px solid rgba(239, 68, 68, 0.3);
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .priority-medium {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(217, 119, 6, 0.15) 100%);
            color: var(--warning-color);
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.8rem;
            border: 1.5px solid rgba(245, 158, 11, 0.3);
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .priority-low {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.15) 100%);
            color: var(--secondary-color);
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.8rem;
            border: 1.5px solid rgba(16, 185, 129, 0.3);
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .maintenance-schedule {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 25px;
        }
        
        .schedule-card {
            background-color: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s ease;
        }
        
        .schedule-card:hover {
            box-shadow: var(--shadow-lg);
        }
        
        .schedule-title {
            font-size: 1.3rem;
            margin-bottom: 24px;
            color: var(--secondary-color);
            font-weight: 700;
        }
        
        .schedule-item {
            display: flex;
            justify-content: space-between;
            padding: 14px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .schedule-item:last-child {
            border-bottom: none;
        }
        
        .equipment-name {
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .maintenance-date {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        footer {
            background: var(--gradient-primary);
            color: white;
            padding: 4rem 0;
            margin-top: 5rem;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
        }
        
        footer h5 {
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        footer p {
            opacity: 0.9;
        }
        
        footer a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s ease;
        }
        
        footer a:hover {
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .dashboard, .kpi-container, .maintenance-schedule {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .causal-graph-container {
                height: 400px;
            }
            
            .hero-section h1 {
                font-size: 2rem;
            }
            
            .hero-section {
                padding: 3rem 0 2rem 0;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <span>Algo-Rythmn.ai</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#solutions">
                            <i class="fas fa-cogs me-1"></i>Solutions
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">
                            <i class="fas fa-envelope me-1"></i>Contact
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container text-center">
            <div class="mb-4">
            </div>
            <h1 class="display-4 mb-4">Lowering the Cost of Production Through AI</h1>
            <p class="lead subtitle mb-3" style="font-size: 1.4rem; font-weight: 600;">Optimizing potash operations and strengthening allocation reliability.</p>
            <p class="lead subtitle mb-3" style="font-size: 1.2rem;">Powered by AI‑driven maintenance, causal analysis, and operational intelligence—delivering safer, smarter, and more efficient performance.</p>
            <p class="lead subtitle mb-5" style="font-size: 1.15rem; font-style: italic;">Aligned to your goals, built for your success.</p>
            <a href="mailto:support@algo-rythmn.ai?subject=Request%20a%20demo" class="btn-hero">
                <i class="fas fa-rocket me-2"></i>
                Request a demo
            </a>
        </div>
    </section>
    
    <div class="container" id="solutions">
        <!-- Context Section -->
        <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%); border-radius: 20px; padding: 40px; margin-bottom: 50px; border-left: 6px solid var(--secondary-color);">
            <h2 style="color: var(--secondary-color); font-weight: 700; margin-bottom: 20px; font-size: 2rem;">Our Approach</h2>
            <p style="font-size: 1.15rem; line-height: 1.8; color: var(--text-primary); margin-bottom: 15px;">
                We understand the potash market is facing significant changes with new supply coming online and operational excellence becoming more critical than ever. Rather than prescribing solutions, we've developed flexible AI tools that can address the specific cost drivers you identify in your operations.
            </p>
            <p style="font-size: 1.15rem; line-height: 1.8; color: var(--text-primary); margin-bottom: 0;">
                Below are three technology capabilities—explore what resonates with your team's priorities and challenges. <strong>We'd like to hear where you think AI could have the most impact on your cost structure and operational reliability.</strong>
            </p>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="solution2">Root Cause Analysis</div>
            <div class="tab" data-tab="solution1">Predictive Maintenance</div>
            <div class="tab" data-tab="solution3">Advanced AI System</div>
        </div>
        
        <!-- Solution 1: Predictive Maintenance -->
        <div class="tab-content" id="solution1">
            <div class="solution-header">
                <h2 class="solution-title">SAP Extensions for Predictive Maintenance</h2>
            </div>
            
            <div class="overview">
                <h3 class="overview-title">Overview</h3>
                <p style="font-size: 1.1rem;">Our <strong>Predictive Maintenance</strong> solution helps lower production costs by extending your existing <strong>SAP systems</strong> with <strong>AI-powered asset monitoring</strong> and <strong>failure prediction</strong>. By analyzing <strong>real-time sensor data</strong>, <strong>maintenance history</strong>, and <strong>operational parameters</strong>, the system identifies <strong>early warning signs</strong> of equipment degradation before failures occur. This directly impacts your bottom line by reducing <strong>unplanned downtime</strong>, optimizing <strong>maintenance spend</strong>, and extending <strong>equipment lifespan</strong>—critical factors for maintaining cost competitiveness as market dynamics shift with upcoming supply changes.</p>
            </div>
            
            <div class="dashboard">
                <div class="chart-container">
                    <h3 class="chart-title">Equipment Health Monitoring</h3>
                    <canvas id="equipmentHealthChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">Downtime Analysis</h3>
                    <canvas id="downtimeChart"></canvas>
                </div>
            </div>
            
            <div class="alert-container">
                <h3 class="chart-title">Predictive Maintenance Alerts</h3>
                <table class="alert-table">
                    <thead>
                        <tr>
                            <th>Equipment</th>
                            <th>Alert Type</th>
                            <th>Priority</th>
                            <th>Predicted Failure</th>
                            <th>Recommended Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Primary Conveyor C-12</td>
                            <td>Bearing Vibration</td>
                            <td><span class="priority-high">High</span></td>
                            <td>14 days</td>
                            <td>Schedule bearing replacement</td>
                        </tr>
                        <tr>
                            <td>Crusher Unit #3</td>
                            <td>Motor Temperature</td>
                            <td><span class="priority-medium">Medium</span></td>
                            <td>21 days</td>
                            <td>Inspect cooling system</td>
                        </tr>
                        <tr>
                            <td>Hydraulic System P-7</td>
                            <td>Pressure Fluctuation</td>
                            <td><span class="priority-low">Low</span></td>
                            <td>45 days</td>
                            <td>Monitor pressure readings</td>
                        </tr>
                        <tr>
                            <td>Excavator E-24</td>
                            <td>Engine Performance</td>
                            <td><span class="priority-medium">Medium</span></td>
                            <td>30 days</td>
                            <td>Check fuel injection system</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="potential-roi">
                <h3 class="potential-roi-title">Potential Impact on Cost of Production</h3>
                <ul class="roi-list">
                    <li><strong>15-25%</strong> reduction in unplanned downtime → <strong>direct savings on lost production value</strong></li>
                    <li><strong>10-15%</strong> extended equipment lifespan → <strong>lower capital replacement costs</strong></li>
                    <li><strong>20-30%</strong> reduction in safety incidents → <strong>fewer man-hours lost, lower insurance premiums</strong></li>
                    <li><strong>Seamless SAP integration</strong> → leverage existing infrastructure investment</li>
                    <li><strong>Improved reliability</strong> → enhanced ability to meet production allocations and Campotex commitments</li>
                </ul>
            </div>
        </div>
        
        <!-- Solution 2: Causal Inference AI -->
        <div class="tab-content active" id="solution2">
            <div class="solution-header">
                <h2 class="solution-title">Causal Inference AI</h2>
            </div>
            
            <div class="overview">
                <h3 class="overview-title">Overview</h3>
                <p style="font-size: 1.1rem;">Our <strong>Causal Inference AI</strong> helps you model the economic impact of operational choices—critical for understanding how different decisions affect your cost of production. By mapping complex <strong>cause-and-effect relationships</strong> across potash operations, this solution reveals the <strong>fundamental cost drivers</strong> behind <strong>equipment failures</strong>, <strong>production bottlenecks</strong>, and <strong>quality variations</strong>. Unlike black-box AI approaches, our system provides <strong>transparent, explainable insights</strong> that support <strong>informed decision making</strong> about where investments will yield the greatest cost reduction—essential for maintaining competitiveness in a changing market landscape.</p>
            </div>
            
            <div class="chart-container">
                <h3 class="chart-title">Interactive Causal Graph: Equipment Failure Analysis</h3>
                <div class="causal-graph-container" id="causalGraphContainer">
                    <div class="graph-controls">
                        <button id="resetView">Reset View</button>
                        <button id="highlightCritical">Highlight Critical Paths</button>
                    </div>
                    <div class="graph-info">
                        <p><strong>Interact with the graph:</strong> Drag nodes to reposition. Click nodes for details. Hover over edges to see relationship strength.</p>
                    </div>
                    <div class="node-info" id="nodeInfo"></div>
                </div>
            </div>
            
            <div class="ai-insights">
                <h3 class="ai-insights-title">AI Insights</h3>
                <div class="insight-item">
                    <p class="insight-text"><strong>Component Wear remains the top predictive signal (β = 0.82) and goes critical ~21 days after sustained vibration spikes plus low-shear oil readings</strong> – The causal engine forecasts that combination to explain >70% of future breakdowns, giving maintenance teams a three-week lead time to balance rotors and refresh lubricant packages.</p>
                    <p class="insight-impact">Impact (illustrative): Converts vibration + oil analytics into a rolling failure clock so crews can schedule interventions before torque demand surges.</p>
                </div>
                <div class="insight-item">
                    <p class="insight-text"><strong>Hydraulic Pressure Loss is the fastest-arriving pathway (β = 0.68) and modelled to trigger actuator stalls about 10 days after oil cleanliness deteriorates</strong> – Monitoring bulk pressure alongside ISO particle counts provides an auto-generated watchlist of high-risk circuits.</p>
                    <p class="insight-impact">Impact (illustrative): Supports forward-looking alerts that prevent multi-hour shovel and conveyor outages by swapping filters and seals before pressure collapses.</p>
                </div>
            </div>
            
            <div class="potential-roi">
                <h3 class="potential-roi-title">Potential Impact on Cost Structure</h3>
                <ul class="roi-list">
                    <li><strong>Model economic scenarios</strong> to understand cost implications of operational decisions</li>
                    <li><strong>30-40%</strong> reduction in false alarms → <strong>avoid unnecessary maintenance spend</strong></li>
                    <li><strong>5-10%</strong> throughput improvement → <strong>better capacity to meet allocation commitments</strong></li>
                    <li><strong>Transparent AI</strong> → understand exactly what drives your costs, not just correlations</li>
                    <li><strong>Strategic flexibility</strong> → quantify trade-offs as market dynamics shift with Jansen impact</li>
                </ul>
            </div>
        </div>
        
        <!-- Solution 3: Multimodal + Multi-Agent -->
        <div class="tab-content" id="solution3">
            <div class="solution-header">
                <h2 class="solution-title">Multimodal + Multi-Agent System</h2>
            </div>
            
            <div class="overview">
                <h3 class="overview-title">Overview</h3>
                <p style="font-size: 1.1rem;">Our <strong>Multimodal AI</strong> framework offers flexible tools that process diverse data streams—from equipment sensors to visual inspections to operator reports. Powered by a <strong>Multi-Agent System</strong>, specialized agents can be configured to address your <strong> operational challenges</strong> across the full risk management cycle: <strong>Predict</strong> risks, <strong>Protect</strong> workers in real-time, and <strong>Mitigate</strong> incidents through rapid learning. It also supports statutory <strong>safety training</strong> by tracking certifications, embedding real‑world data into training simulations, and providing adaptive feedback to ensure compliance. By enabling <strong>collaborative intelligence</strong> across maintenance, operations, logistics, and safety teams, the system drives stronger reliability, safety performance, and workforce competence—critical for stakeholder confidence and meeting production targets.</p>            
            </div>

        <div class="dashboard">
            <div class="chart-container">
                <h3 class="chart-title">Multimodal AI</h3>
                <p class="text-center mb-4" style="color: var(--text-secondary);">Multimodal AI processes multiple data types simultaneously - text, images, sensor data, audio, and video - to provide comprehensive mining operations intelligence</p>
                <div id="multimodalGraphContainer" style="width: 100%; height: 480px; position: relative;"></div>
            </div>
            <div class="chart-container">
                <h3 class="chart-title">Multi-Agent System</h3>
                <p class="text-center mb-4" style="color: var(--text-secondary);">Specialized AI agents collaborate autonomously to monitor, predict, and optimize mining operations in real-time
                <div id="multiAgentChartContainer" style="width: 100%; height: 460px; position: relative;"></div>
            </div>
        </div>
            
            <div class="chart-container">
                <h3 class="chart-title">Interactive AI Demo—What Would You Like to Explore?</h3>
                <p>These are examples of how the AI can analyze operational scenarios. We're curious: what questions would be most valuable for your team to answer quickly?</p>
                
                <div class="custom-select-wrapper">
                    <div class="custom-select-trigger" id="customSelectTrigger">
                        <span id="selectedText">-- Select a mining operations query --</span>
                    </div>
                    <div class="custom-select-options" id="customSelectOptions">
                        <div class="custom-option" data-value="">-- Select a mining operations query --</div>
                        <div class="custom-option" data-value="oil_sensor_anomaly">Detect oil contamination anomalies in hydraulic systems using sensor data</div>
                        <div class="custom-option" data-value="oil_degradation">Predict oil degradation rates and optimal replacement intervals</div>
                        <div class="custom-option" data-value="oil_temp_correlation">Analyze correlation between oil temperature and equipment performance</div>
                        <div class="custom-option" data-value="maintenance_backlog">Analyze maintenance backlog trends and resource allocation</div>
                        <div class="custom-option" data-value="conveyor_bearing_prediction">Predict conveyor bearing failures based on vibration and temperature patterns</div>
                        <div class="custom-option" data-value="crusher_wear_prediction">Forecast crusher liner wear and optimize replacement scheduling</div>
                        <div class="custom-option" data-value="ground_stability_risk"><strong>[Safety: Prevention Stage]</strong> Assess Esterhazy K3 mine stability using seismic, stress, and fracture data from the past 90 days. Correlate with ground fall history and current personnel locations.</div>
                        <div class="custom-option" data-value="machine_safety_compliance"><strong>[Safety: Protection Stage]</strong> Review Mulberry Plant Granulation Building video/sensor data from the last 7 days for LOTO compliance, guard integrity, and unauthorized zone entry.</div>
                        <div class="custom-option" data-value="process_safety_incident"><strong>[Safety: Mitigation Stage]</strong> Analyze Faustina Sulfuric Acid Plant Tier‑2 vapor release alarm data (60 min pre‑alarm to resolution). Trace root cause, assess ESD response, and identify safety control gaps.</div>
                    </div>
                </div>
                
                <div class="response-area">
                    <div class="response-title">AI Response (Sample):</div>
                    <div id="aiResponse">Select a mining operations query from the dropdown to see a mock AI analysis for demo purposes.</div>
                </div>
            </div>

            <div class="potential-roi">
                <h3 class="potential-roi-title">Where Could This Drive Cost Reduction?</h3>
                <ul class="roi-list">
                    <li><strong>Enhanced Safety, Training & Compliance:</strong> AI‑powered hazard detection and integrated training modules prevent incidents, reduce man‑hours lost, and avoid shutdowns—<span class="metric-highlight">critical for allocation reliability and stakeholder confidence</span>
                        <ul style="margin-top: 10px; margin-left: 20px; font-size: 1.1em;">
                            <li><strong>15–25%</strong> fewer high‑severity safety events → predictive risk detection reduces downtime and production losses</li>
                            <li><strong>30–40%</strong> fewer near‑miss incidents → real‑time worker protection improves frontline safety</li>
                            <li><strong>25–35%</strong> faster corrective and incident resolution cycles → rapid learning minimizes extended shutdowns</li>
                            <li><strong>10–15%</strong> lower liability and insurance costs → automated compliance monitoring reduces regulatory findings</li>
                            <li><strong>20-30%</strong> maintenance optimization → lower planned and emergency spend while maintaining safety standards</li>
                        </ul>
                    </li>
                    <li><strong>We'd like your input:</strong> Where do you see the biggest opportunities in your operations?</li>
                    <li><strong>Scalable across sites</strong> → position for cost competitiveness and safety leadership as Jansen supply arrives (2027)</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <h5 class="mb-3"><i></i>Algo-Rythmn.ai</h5>
                    <p class="mb-2">Intelligent operations, competitive advantage</p>
                    <p class="mb-0"><i class="fas fa-envelope me-2"></i>support@algo-rythmn.ai</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <div class="mb-3">
                        <a href="#solutions" class="text-white text-decoration-none me-3">
                            <i class="fas fa-cogs me-1"></i>Solutions
                        </a>
                        <a href="#contact" class="text-white text-decoration-none">
                            <i class="fas fa-envelope me-1"></i>Contact
                        </a>
                    </div>
                    <p class="mb-2">&copy; 2025 Algo-Rythmn.ai. All rights reserved.</p>
                    <p class="mb-0 small">Proprietary and Confidential</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Tab switching functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs and contents
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
                
                // Redraw causal graph when tab becomes active
                if (tab.dataset.tab === 'solution2') {
                    setTimeout(drawCausalGraph, 100);
                }
            });
        });
        
        // Solution 1: Predictive Maintenance Charts
        const equipmentHealthCtx = document.getElementById('equipmentHealthChart').getContext('2d');
        const equipmentHealthChart = new Chart(equipmentHealthCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: 'Equipment Health Score',
                    data: [82, 79, 85, 88, 84, 80, 76, 72, 78, 85, 89, 91],
                    borderColor: '#10b981',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    tension: 0.4,
                    fill: true,
                    borderWidth: 3
                }, {
                    label: 'Maintenance Threshold',
                    data: [70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70],
                    borderColor: '#ef4444',
                    borderDash: [5, 5],
                    fill: false,
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: false
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false
                    },
                    legend: {
                        labels: {
                            font: {
                                family: 'Inter'
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        min: 60,
                        max: 100,
                        title: {
                            display: true,
                            text: 'Health Score',
                            font: {
                                family: 'Inter'
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    }
                }
            }
        });
        
        const downtimeCtx = document.getElementById('downtimeChart').getContext('2d');
        const downtimeChart = new Chart(downtimeCtx, {
            type: 'bar',
            data: {
                labels: ['Conveyors', 'Crushers', 'Drills', 'Excavators', 'Processing', 'Transport'],
                datasets: [{
                    label: 'Before AI Implementation',
                    data: [42, 38, 28, 32, 25, 35],
                    backgroundColor: 'rgba(148, 163, 184, 0.7)',
                    borderColor: 'rgba(148, 163, 184, 1)',
                    borderWidth: 1
                }, {
                    label: 'After AI Implementation',
                    data: [28, 25, 19, 22, 16, 24],
                    backgroundColor: 'rgba(16, 185, 129, 0.8)',
                    borderColor: '#10b981',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: false
                    },
                    legend: {
                        labels: {
                            font: {
                                family: 'Inter'
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Hours of Downtime (Monthly Avg)',
                            font: {
                                family: 'Inter'
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
        
        // Solution 2: Interactive Causal Inference Graph
        let simulation;
        let nodeInfo;
        
        function drawCausalGraph() {
            const container = document.getElementById('causalGraphContainer');
            const width = container.clientWidth;
            const height = container.clientHeight;
            nodeInfo = document.getElementById('nodeInfo');
            
            // Clear previous content
            d3.select("#causalGraphContainer").select("svg").remove();
            
            const svg = d3.select("#causalGraphContainer")
                .append("svg")
                .attr("width", width)
                .attr("height", height);

            const defs = svg.append("defs");
            const bgGradient = defs.append("linearGradient")
                .attr("id", "causalBackground")
                .attr("x1", "0%")
                .attr("x2", "100%")
                .attr("y1", "0%")
                .attr("y2", "100%");
            bgGradient.append("stop").attr("offset", "0%").attr("stop-color", "#f8fafc");
            bgGradient.append("stop").attr("offset", "100%").attr("stop-color", "#eef2ff");

            defs.append("marker")
                .attr("id", "arrowhead")
                .attr("viewBox", "0 -5 10 10")
                .attr("refX", 14)
                .attr("refY", 0)
                .attr("markerWidth", 2)
                .attr("markerHeight", 2)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M0,-5L10,0L0,5")
                .attr("fill", "#e9950e");

            svg.append("rect")
                .attr("width", width)
                .attr("height", height)
                .attr("fill", "url(#causalBackground)");

            const colorScale = {
                1: "#ef4444",
                2: "#4ba67b",
                3: "#2890eb",
                4: "#f2f54c",
                5: "#a855f7"
            };

            const radiusScale = {
                1: 28,
                2: 24,
                3: 20,
                4: 17,
                5: 14
            };

            const linkColor = d => d.value >= 1 ? "#0ea5e9" : "#94a3b8";
            
        // Define nodes with more detailed information
        const nodes = [
                { id: "Equipment Failure", group: 1, description: "Critical production asset breakdown", impact: "High – halts production and triggers safety events", mitigation: "Predictive playbooks, redundancy, automated shutdowns" },
                { id: "Component Wear", group: 2, description: "Mechanical abrasion on conveyors, crushers and drives", impact: "High – increases torque requirements", mitigation: "Condition-based replacement, wear-part forecasting" },
                { id: "Hydraulic Pressure Loss", group: 2, description: "Fluid leaks and pump degradation", impact: "High – causes actuator delays and force drop", mitigation: "Closed-loop pressure monitoring, seal upgrades" },
                { id: "Control System Drift", group: 2, description: "PLC/SCADA tuning deviation", impact: "Medium – destabilizes set-points", mitigation: "Auto-calibration, firmware governance" },
                { id: "Electrical Fault Propagation", group: 2, description: "Spikes and harmonics across power trains", impact: "Medium – stresses motors and sensors", mitigation: "Power quality analytics, isolation relays" },
                { id: "Operating Conditions", group: 3, description: "Load, speed and duty-cycle profile", impact: "Medium – accelerates fatigue", mitigation: "Adaptive dispatching, load balancing" },
                { id: "Maintenance Discipline", group: 3, description: "Compliance to SOPs and torque specs", impact: "Medium – poor discipline seeds repeat failures", mitigation: "Digital work instructions, QA audits" },
                { id: "Production Pressure", group: 3, description: "Backlog-driven throughput push", impact: "Medium – shortcuts maintenance windows", mitigation: "Scenario planning, capacity buffers" },
                { id: "Environmental Factors", group: 3, description: "Ambient temperature, dust, humidity", impact: "Medium – external stressor", mitigation: "Dust suppression, enclosures, HVAC" },
                { id: "Lubrication Quality", group: 4, description: "Viscosity, cleanliness and additive health", impact: "High – primary wear lever", mitigation: "Inline oil analytics, auto-dosing" },
                { id: "Vibration Severity", group: 4, description: "Imbalance and misalignment signatures", impact: "High – predicts bearing failures", mitigation: "Vibration AI agents, rotor balancing" },
                { id: "Thermal Hotspots", group: 4, description: "Infrared anomalies on motors/gearboxes", impact: "Medium – indicates insulation breakdown", mitigation: "Thermal scanning, cooling retrofits" },
                { id: "Dust Contamination", group: 4, description: "Ingress of abrasive particulates", impact: "High – contaminates lubrication systems", mitigation: "HEPA filtration, pressurised cabs" },
                { id: "Sensor Drift", group: 4, description: "Instrumentation bias over time", impact: "Medium – corrupts control logic", mitigation: "Autonomous recalibration, redundancy" },
                { id: "Oil Cleanliness Index", group: 5, description: "ISO particle count and moisture", impact: "Medium – feeds lubrication models", mitigation: "Offline lab sampling, dehydration units" },
                { id: "Shock Load Events", group: 5, description: "Acute torque spikes during start/stop", impact: "Medium – cracks drivetrain components", mitigation: "Soft starts, torque limiting" },
                { id: "Operator Variability", group: 5, description: "Human-in-the-loop deviations", impact: "Low – indirect trigger", mitigation: "AR guidance, remote assist" }
            ];
            
            // Define links with strength values
            const links = [
                { source: "Component Wear", target: "Equipment Failure", value: 0.82, description: "Wear state explains most unplanned stoppages" },
                { source: "Hydraulic Pressure Loss", target: "Equipment Failure", value: 0.68, description: "Pressure drops stall critical actuators" },
                { source: "Control System Drift", target: "Equipment Failure", value: 0.55, description: "Out-of-band controls destabilise assets" },
                { source: "Electrical Fault Propagation", target: "Equipment Failure", value: 0.5, description: "Transient faults cascade into shutdowns" },
                { source: "Operating Conditions", target: "Component Wear", value: 0.6, description: "Aggressive duty cycle accelerates wear" },
                { source: "Operating Conditions", target: "Hydraulic Pressure Loss", value: 0.58, description: "High load raises fluid temps and cavitation" },
                { source: "Maintenance Discipline", target: "Component Wear", value: 0.62, description: "Torque specs and SOP compliance reduce wear" },
                { source: "Maintenance Discipline", target: "Control System Drift", value: 0.46, description: "Firmware updates and calibrations prevent drift" },
                { source: "Production Pressure", target: "Maintenance Discipline", value: 0.52, description: "Throughput pushes compress maintenance windows" },
                { source: "Environmental Factors", target: "Operating Conditions", value: 0.66, description: "Heat and dust change the operating envelope" },
                { source: "Environmental Factors", target: "Dust Contamination", value: 0.74, description: "Open-pit dust is a dominant contaminant" },
                { source: "Lubrication Quality", target: "Component Wear", value: 0.9, description: "Viscosity and additive package shield surfaces" },
                { source: "Lubrication Quality", target: "Hydraulic Pressure Loss", value: 0.63, description: "Oil shear stability maintains pump performance" },
                { source: "Vibration Severity", target: "Component Wear", value: 0.78, description: "Imbalance is an early indicator for bearings" },
                { source: "Vibration Severity", target: "Shock Load Events", value: 0.65, description: "Elevated vibration correlates with torque spikes" },
                { source: "Thermal Hotspots", target: "Control System Drift", value: 0.57, description: "Overheated cabinets disharmonize sensors" },
                { source: "Thermal Hotspots", target: "Electrical Fault Propagation", value: 0.49, description: "Heat degrades insulation and wiring" },
                { source: "Dust Contamination", target: "Component Wear", value: 0.69, description: "Dust-laden oil becomes abrasive" },
                { source: "Sensor Drift", target: "Control System Drift", value: 0.55, description: "Biased inputs mislead controllers" },
                { source: "Oil Cleanliness Index", target: "Lubrication Quality", value: 0.71, description: "Particle count predicts lubricant health" },
                { source: "Shock Load Events", target: "Component Wear", value: 0.6, description: "Repeated torque spikes chip teeth" },
                { source: "Operator Variability", target: "Production Pressure", value: 0.48, description: "Manual overrides change cadence" },
                { source: "Operator Variability", target: "Maintenance Discipline", value: 0.44, description: "Experience gap impacts SOP adherence" }
            ];
            
            // Create simulation
            simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.id).distance(100).strength(d => d.value))
                .force("charge", d3.forceManyBody().strength(-300))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .force("collision", d3.forceCollide().radius(40));
            
            // Create links
            const link = svg.append("g")
                .attr("class", "links")
                .selectAll("line")
                .data(links)
                .enter()
                .append("line")
                .attr("stroke-width", d => 2 + d.value * 2.5)
                .attr("stroke", d => linkColor(d))
                .attr("stroke-opacity", 0.75)
                .attr("stroke-dasharray", d => d.value >= 0.65 ? "0" : "6,6")
                .attr("marker-end", "url(#arrowhead)");
            
            // Add link labels
            const linkLabel = svg.append("g")
                .attr("class", "link-labels")
                .selectAll("text")
                .data(links)
                .enter()
                .append("text")
                .text(d => `β=${d.value.toFixed(2)}`)
                .attr("font-size", "10px")
                .attr("fill", "#667085")
                .style("text-anchor", "middle");
            
            // Create nodes
            const baseColor = d => colorScale[d.group] || "#94a3b8";

            const node = svg.append("g")
                .attr("class", "nodes")
                .selectAll("circle")
                .data(nodes)
                .enter()
                .append("circle")
                .attr("r", d => radiusScale[d.group] || 14)
                .attr("fill", d => baseColor(d))
                .attr("stroke", "#ffffff")
                .attr("stroke-width", 2.5)
                .style("filter", "drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))")
                .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    .on("end", dragended));
            
            // Add node labels
            const label = svg.append("g")
                .attr("class", "labels")
                .selectAll("text")
                .data(nodes)
                .enter()
                .append("text")
                .text(d => d.id)
                .attr("font-size", d => d.group <= 2 ? "14px" : "11px")
                .attr("dx", 0)
                .attr("dy", d => (radiusScale[d.group] || 14) + 12)
                .style("text-anchor", "middle")
                .attr("fill", "#333")
                .attr("font-weight", d => d.group === 1 ? "bold" : "normal");
            
            // Add node interactions
            node.on("mouseover", function(event, d) {
                // Highlight connected links
                link.attr("stroke", l => 
                    l.source.id === d.id || l.target.id === d.id ? "#f97316" : linkColor(l)
                ).attr("stroke-width", l => 
                    l.source.id === d.id || l.target.id === d.id ? 6 : 2 + l.value * 2.5
                ).attr("stroke-dasharray", l => 
                    l.source.id === d.id || l.target.id === d.id ? "0" : (l.value >= 0.65 ? "0" : "6,6")
                );
                
                linkLabel.attr("fill", l => 
                    l.source.id === d.id || l.target.id === d.id ? "#f97316" : "#667085"
                );
                
                // Show node info
                nodeInfo.innerHTML = `
                    <h4>${d.id}</h4>
                    <p><strong>Description:</strong> ${d.description}</p>
                    <p><strong>Impact:</strong> ${d.impact}</p>
                    <p><strong>Mitigation:</strong> ${d.mitigation}</p>
                `;
                nodeInfo.style.display = 'block';
                nodeInfo.style.left = (event.pageX - container.getBoundingClientRect().left + 10) + 'px';
                nodeInfo.style.top = (event.pageY - container.getBoundingClientRect().top + 10) + 'px';
            });
            
            node.on("mouseout", function() {
                // Reset link appearance
                link.attr("stroke", d => linkColor(d))
                    .attr("stroke-width", d => 2 + d.value * 2.5)
                    .attr("stroke-dasharray", d => d.value >= 0.65 ? "0" : "6,6");
                
                linkLabel.attr("fill", "#667085");
                
                // Hide node info
                nodeInfo.style.display = 'none';
            });
            
            node.on("click", function(event, d) {
                // Toggle fixed position on click
                d.fx = d.fx ? null : d.x;
                d.fy = d.fy ? null : d.y;
                simulation.alpha(0.3).restart();
            });
            
            // Add link interactions
            link.on("mouseover", function(event, d) {
                d3.select(this)
                    .attr("stroke", "#f97316")
                    .attr("stroke-width", 6)
                    .attr("stroke-dasharray", "0");
                
                // Show link description
                nodeInfo.innerHTML = `
                    <h4>Relationship: ${d.source.id} → ${d.target.id}</h4>
                    <p><strong>Strength:</strong> ${d.value}</p>
                    <p><strong>Description:</strong> ${d.description}</p>
                `;
                nodeInfo.style.display = 'block';
                nodeInfo.style.left = (event.pageX - container.getBoundingClientRect().left + 10) + 'px';
                nodeInfo.style.top = (event.pageY - container.getBoundingClientRect().top + 10) + 'px';
            });
            
            link.on("mouseout", function() {
                d3.select(this)
                    .attr("stroke", d => linkColor(d))
                    .attr("stroke-width", d => 2 + d.value * 2.5)
                    .attr("stroke-dasharray", d => d.value >= 0.65 ? "0" : "6,6");
                nodeInfo.style.display = 'none';
            });
            
            // Update positions on each tick
            simulation.on("tick", () => {
                link
                    .attr("x1", d => d.source.x)
                    .attr("y1", d => d.source.y)
                    .attr("x2", d => d.target.x)
                    .attr("y2", d => d.target.y);
                
                node
                    .attr("cx", d => d.x)
                    .attr("cy", d => d.y);
                
                label
                    .attr("x", d => d.x)
                    .attr("y", d => d.y);
                
                linkLabel
                    .attr("x", d => (d.source.x + d.target.x) / 2)
                    .attr("y", d => (d.source.y + d.target.y) / 2);
            });
            
            // Drag functions
            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }
            
            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }
            
            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
            }
            
            // Graph control functions
            document.getElementById('resetView').addEventListener('click', function() {
                simulation.force("center", d3.forceCenter(width / 2, height / 2));
                simulation.alpha(0.3).restart();
                
                nodes.forEach(d => {
                    d.fx = null;
                    d.fy = null;
                });
            });
            
            const criticalNodes = new Set(["Equipment Failure", "Component Wear", "Hydraulic Pressure Loss", "Lubrication Quality", "Dust Contamination", "Vibration Severity"]);
            const criticalLinkIds = new Set([
                "Component Wear->Equipment Failure",
                "Hydraulic Pressure Loss->Equipment Failure",
                "Lubrication Quality->Component Wear",
                "Dust Contamination->Component Wear",
                "Vibration Severity->Component Wear"
            ]);

            const highlightButton = document.getElementById('highlightCritical');
            if (highlightButton) {
                highlightButton.addEventListener('click', function() {
                    node.attr("fill", d => criticalNodes.has(d.id) ? "#ef4444" : baseColor(d));
                    
                    link.attr("stroke", l => {
                        const key = `${l.source.id}->${l.target.id}`;
                        return criticalLinkIds.has(key) ? "#ef4444" : linkColor(l);
                    }).attr("stroke-width", l => {
                        const key = `${l.source.id}->${l.target.id}`;
                        return criticalLinkIds.has(key) ? 6 : 2 + l.value * 2.5;
                    }).attr("stroke-dasharray", l => {
                        const key = `${l.source.id}->${l.target.id}`;
                        return criticalLinkIds.has(key) ? "0" : (l.value >= 0.65 ? "0" : "6,6");
                    });
                    
                    setTimeout(() => {
                        node.attr("fill", d => baseColor(d));
                        link
                            .attr("stroke", d => linkColor(d))
                            .attr("stroke-width", d => 2 + d.value * 2.5)
                            .attr("stroke-dasharray", d => d.value >= 0.65 ? "0" : "6,6");
                    }, 3000);
                });
            }
        }
        
        // Redraw graph on window resize
        window.addEventListener('resize', drawCausalGraph);
        
        // Multimodal AI Graph for Solution 3
        function drawMultimodalGraph() {
            const container = document.getElementById('multimodalGraphContainer');
            if (!container) return;
            
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            // Clear previous content
            d3.select("#multimodalGraphContainer").selectAll("*").remove();
            
            const svg = d3.select("#multimodalGraphContainer")
                .append("svg")
                .attr("width", width)
                .attr("height", height);
            
            // Define the data modalities with icons
            const modalities = [
                { id: 'text', label: 'Text\nReports', icon: '📄', color: '#3b82f6', angle: 0 },
                { id: 'image', label: 'Image\nAnalysis', icon: '🖼️', color: '#8b5cf6', angle: 45 },
                { id: 'audio', label: 'Audio\nSignals', icon: '🔊', color: '#ec4899', angle: 90 },
                { id: 'video', label: 'Video\nMonitoring', icon: '🎥', color: '#f59e0b', angle: 135 },
                { id: 'sensor', label: 'Sensor\nData', icon: '📊', color: '#10b981', angle: 180 },
                { id: 'thermal', label: 'Thermal\nImaging', icon: '🔥', color: '#ef4444', angle: 225 },
                { id: 'lidar', label: 'LiDAR\nScanning', icon: '📡', color: '#06b6d4', angle: 270 },
                { id: 'drone', label: 'Drone\nSurveys', icon: '🚁', color: '#14b8a6', angle: 315 }
            ];
            
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = Math.min(width, height) * 0.35;
            const nodeRadius = 50; // Increased node size
            
            // Create connections/links
            const links = svg.append('g').attr('class', 'links');
            
            // Draw outer circle
            svg.append('circle')
                .attr('cx', centerX)
                .attr('cy', centerY)
                .attr('r', radius)
                .attr('fill', 'none')
                .attr('stroke', '#e2e8f0')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5')
                .style('opacity', 0.5);
            
            // Draw inner connection circle
            svg.append('circle')
                .attr('cx', centerX)
                .attr('cy', centerY)
                .attr('r', radius * 0.6)
                .attr('fill', 'none')
                .attr('stroke', '#cbd5e1')
                .attr('stroke-width', 1)
                .attr('stroke-dasharray', '3,3')
                .style('opacity', 0.3);
            
            // Draw connecting lines from center to each modality
            modalities.forEach(mod => {
                const angle = (mod.angle - 90) * Math.PI / 180;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                
                links.append('line')
                    .attr('x1', centerX)
                    .attr('y1', centerY)
                    .attr('x2', x)
                    .attr('y2', y)
                    .attr('stroke', mod.color)
                    .attr('stroke-width', 2)
                    .style('opacity', 0.3)
                    .attr('class', 'modal-link');
            });
            
            // Draw mesh connections between modalities
            for (let i = 0; i < modalities.length; i++) {
                for (let j = i + 1; j < modalities.length; j++) {
                    const angle1 = (modalities[i].angle - 90) * Math.PI / 180;
                    const angle2 = (modalities[j].angle - 90) * Math.PI / 180;
                    const x1 = centerX + radius * Math.cos(angle1);
                    const y1 = centerY + radius * Math.sin(angle1);
                    const x2 = centerX + radius * Math.cos(angle2);
                    const y2 = centerY + radius * Math.sin(angle2);
                    
                    links.append('line')
                        .attr('x1', x1)
                        .attr('y1', y1)
                        .attr('x2', x2)
                        .attr('y2', y2)
                        .attr('stroke', '#e2e8f0')
                        .attr('stroke-width', 1)
                        .style('opacity', 0.15)
                        .attr('class', 'mesh-link');
                }
            }
            
            // Create central AI hub
            const centralHub = svg.append('g')
                .attr('transform', `translate(${centerX}, ${centerY})`);
            
            // Central circle with gradient
            const defs = svg.append('defs');
            const gradient = defs.append('radialGradient')
                .attr('id', 'centralGradient');
            gradient.append('stop')
                .attr('offset', '0%')
                .attr('stop-color', '#10b981');
            gradient.append('stop')
                .attr('offset', '100%')
                .attr('stop-color', '#059669');
            
            centralHub.append('circle')
                .attr('r', 70) // Increased central hub size
                .attr('fill', 'url(#centralGradient)')
                .attr('stroke', 'white')
                .attr('stroke-width', 4)
                .style('filter', 'drop-shadow(0 4px 12px rgba(16, 185, 129, 0.4))');
            
            centralHub.append('text')
                .attr('text-anchor', 'middle')
                .attr('dy', '-0.5em')
                .attr('fill', 'white')
                .attr('font-size', '18px')
                .attr('font-weight', '700')
                .text('Multimodal');
            
            centralHub.append('text')
                .attr('text-anchor', 'middle')
                .attr('dy', '1em')
                .attr('fill', 'white')
                .attr('font-size', '18px')
                .attr('font-weight', '700')
                .text('AI');
            
            // Create modality nodes
            const nodes = svg.append('g').attr('class', 'nodes');
            
            modalities.forEach((mod, i) => {
                const angle = (mod.angle - 90) * Math.PI / 180;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                
                const node = nodes.append('g')
                    .attr('transform', `translate(${x}, ${y})`)
                    .attr('class', 'modality-node')
                    .style('cursor', 'pointer');
                
                // Background circle
                const circle = node.append('circle')
                    .attr('r', nodeRadius)
                    .attr('fill', 'white')
                    .attr('stroke', mod.color)
                    .attr('stroke-width', 3)
                    .style('filter', 'drop-shadow(0 2px 8px rgba(0, 0, 0, 0.15))');
                
                // Icon
                node.append('text')
                    .attr('text-anchor', 'middle')
                    .attr('dy', '-0.3em')
                    .attr('font-size', '28px')
                    .text(mod.icon);
                
                // Label
                const lines = mod.label.split('\n');
                lines.forEach((line, idx) => {
                    node.append('text')
                        .attr('text-anchor', 'middle')
                        .attr('dy', `${1.2 + idx * 0.9}em`)
                        .attr('fill', mod.color)
                        .attr('font-size', '12px')
                        .attr('font-weight', '600')
                        .text(line);
                });
                
                // Hover effects
                node.on('mouseenter', function() {
                    circle.transition()
                        .duration(200)
                        .attr('r', nodeRadius * 1.15)
                        .attr('stroke-width', 4);
                    
                    d3.selectAll('.modal-link')
                        .transition()
                        .duration(200)
                        .style('opacity', function() {
                            return d3.select(this).attr('stroke') === mod.color ? 0.7 : 0.1;
                        });
                })
                .on('mouseleave', function() {
                    circle.transition()
                        .duration(200)
                        .attr('r', nodeRadius)
                        .attr('stroke-width', 3);
                    
                    d3.selectAll('.modal-link')
                        .transition()
                        .duration(200)
                        .style('opacity', 0.3);
                });
                
            });
            
            // Add pulsing animation to central hub
            function pulse() {
                centralHub.select('circle')
                    .transition()
                    .duration(2000)
                    .attr('r', 75)
                    .transition()
                    .duration(2000)
                    .attr('r', 70)
                    .on('end', pulse);
            }
            pulse();
        }
        // Updated Multi-Agent System Visualization
        function drawMultiAgentSystem() {
            const container = document.getElementById("multiAgentChartContainer");
            if (!container) return;

            const bounds = container.getBoundingClientRect();
            const width = bounds.width || container.clientWidth || 480;
            const height = bounds.height || container.clientHeight || 420;
            const radius = Math.min(width, height) / 2 - 40;
            if (radius <= 0) return;

            d3.select("#multiAgentChartContainer").selectAll("*").remove();

    const svg = d3.select("#multiAgentChartContainer")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

            const g = svg.append("g")
                .attr("transform", `translate(${width / 2}, ${height / 2})`);

            const ringLevels = [
                { radius: radius * 0.33, label: "Strategic Layer" },
                { radius: radius * 0.66, label: "Domain Agents" },
                { radius: radius, label: "Specialist Pods" }
            ];

            g.append("g")
                .selectAll("circle")
                .data(ringLevels)
                .enter()
                .append("circle")
                .attr("r", d => d.radius)
                .attr("fill", (d, i) => i === 0 ? "rgba(16, 185, 129, 0.08)" : "none")
                .attr("stroke", "rgba(15, 23, 42, 0.18)")
                .attr("stroke-dasharray", "6 8");

            g.append("g")
                .selectAll("text")
                .data(ringLevels)
                .enter()
                .append("text")
                .attr("class", "agent-ring-label")
                .attr("y", d => -d.radius + 14)
                .attr("text-anchor", "middle")
                .text(d => d.label);

            const agents = {
                name: "Orchestrator Agent",
                description: "Coordinates all mining operations and makes strategic decisions",
                children: [
                    {
                        name: "Predictive Maintenance Agent",
                        description: "Monitors equipment health and predicts failures",
                        children: [
                            { name: "Sensor Data Agent", description: "Processes real-time sensor data from mining equipment" },
                            { name: "Vibration Analysis Agent", description: "Analyzes vibration patterns for early failure detection" },
                            { name: "Thermal Monitoring Agent", description: "Monitors equipment temperatures and cooling systems" }
                        ]
                    },
                    {
                        name: "Operational Planning Agent",
                        description: "Optimizes production schedules and resource allocation",
                        children: [
                            { name: "Production Scheduling Agent", description: "Creates optimal mining and processing schedules" },
                            { name: "Resource Allocation Agent", description: "Manages equipment and personnel assignments" },
                            { name: "Throughput Optimization Agent", description: "Maximizes material processing efficiency" }
                        ]
                    },
                    {
                        name: "Logistics Coordination Agent",
                        description: "Manages supply chain and material transport",
                        children: [
                            { name: "Haul Route Agent", description: "Optimizes truck routes and load distribution" },
                            { name: "Inventory Management Agent", description: "Tracks parts, supplies, and materials inventory" },
                            { name: "Supplier Coordination Agent", description: "Manages relationships with equipment suppliers" }
                        ]
                    },
                    {
                        name: "Safety & Compliance Agent",
                        description: "Ensures regulatory compliance and worker safety",
                        children: [
                            { name: "Environmental Monitoring Agent", description: "Tracks emissions, dust levels, and environmental impact" },
                            { name: "Safety Protocol Agent", description: "Monitors compliance with safety procedures" },
                            { name: "Incident Response Agent", description: "Coordinates emergency response and reporting" }
                        ]
                    }
                ]
            };

            const baseColors = {
                "Predictive Maintenance Agent": "#10b981",
                "Operational Planning Agent": "#3b82f6",
                "Logistics Coordination Agent": "#f97316",
                "Safety & Compliance Agent": "#ef4444"
            };

            const lightenColor = (hex, strength = 0.35) => d3.interpolateRgb(hex, "#ffffff")(strength);
    const getPrimaryColor = node => {
        if (node.depth === 0) return "#6b7280";
                const ancestor = node.depth === 1 ? node : node.ancestors().find(a => a.depth === 1);
                return (ancestor && baseColors[ancestor.data.name]) ? baseColors[ancestor.data.name] : "#38bdf8";
            };

            const cluster = d3.cluster().size([360, radius - 40]);
            const root = d3.hierarchy(agents);
            cluster(root);

            const maxDepth = root.height;
            root.each(d => {
                d.y = (d.depth / maxDepth) * (radius - 60);
                if (d.depth === maxDepth) {
                    d.y += 28;
                }
            });

            const cleanLabel = name => name.replace(/ Agent| Coordination| Management/g, '').trim();
            const getLabelLines = node => {
                const base = cleanLabel(node.data.name);
                const maxChars = node.depth === 1 ? 18 : 14;
                if (base.length <= maxChars) {
                    return [base];
                }
                const words = base.split(' ');
                const lines = [];
                let current = '';
                words.forEach(word => {
                    const candidate = current ? `${current} ${word}` : word;
                    if (candidate.length > maxChars && current) {
                        lines.push(current);
                        current = word;
                    } else {
                        current = candidate;
                    }
                });
                if (current) lines.push(current);
                return lines;
            };

            const radialLine = d3.linkRadial()
                .angle(d => (d.x / 180) * Math.PI)
                .radius(d => d.y);

            const linkPaths = g.append("g")
                .attr("class", "agent-links")
                .selectAll("path")
                .data(root.links())
                .enter()
                .append("path")
                .attr("d", radialLine)
                .attr("fill", "none")
                .attr("stroke", d => lightenColor(getPrimaryColor(d.target), 0.2))
                .attr("stroke-width", d => d.target.depth === 1 ? 2.2 : 1.2)
                .attr("stroke-opacity", 0.5);

            const nodes = g.append("g")
                .attr("class", "agent-nodes")
                .selectAll("g")
                .data(root.descendants())
                .enter()
                .append("g")
                .attr("class", d => d.depth === 0 ? "agent-node agent-node-root" : "agent-node")
                .attr("transform", d => d.depth === 0 ? "" : `rotate(${d.x - 90}) translate(${d.y},0)`);

            nodes.append("circle")
                .attr("r", d => {
                    if (d.depth === 0) return 34;
                    if (d.depth === 1) return 20;
                    return 11;
                })
        .attr("fill", d => {
            if (d.depth === 0) return "#6b7280";
                    if (d.depth === 1) return getPrimaryColor(d);
                    return lightenColor(getPrimaryColor(d), 0.45);
                })
        .attr("stroke", d => d.depth === 0 ? "#6b7280" : "#ffffff")
                .attr("stroke-width", 2)
                .style("filter", d => d.depth === 0 ? "none" : "drop-shadow(0 4px 10px rgba(15, 23, 42, 0.25))");

            const rootLabel = nodes.filter(d => d.depth === 0);
            rootLabel.append("text")
                .attr("fill", "#0f172a")
                .attr("text-anchor", "middle")
                .attr("font-weight", 700)
                .attr("font-size", "0.95rem")
                .selectAll("tspan")
                .data(["Orchestrator", "Agent"])
                .enter()
                .append("tspan")
                .attr("x", 0)
                .attr("dy", (_, i) => i === 0 ? 0 : 16)
                .text(d => d);

            const toCartesian = node => {
                const angle = (node.x - 90) * (Math.PI / 180);
                return {
                    x: node.y * Math.cos(angle),
                    y: node.y * Math.sin(angle)
                };
            };

            const domainLabelOffsets = {
                "Predictive Maintenance Agent": { x: 34, y: 24, anchor: "start" },
                "Operational Planning Agent": { x: 34, y: -22, anchor: "start" },
                "Logistics Coordination Agent": { x: -34, y: -22, anchor: "end" },
                "Safety & Compliance Agent": { x: -34, y: 24, anchor: "end" }
            };

            const domainLabelGroup = g.append("g").attr("class", "domain-labels");
            root.descendants().filter(d => d.depth === 1).forEach(node => {
                const coords = toCartesian(node);
                const spec = domainLabelOffsets[node.data.name] || { x: 28, y: 0, anchor: node.x < 180 ? "start" : "end" };
                domainLabelGroup.append("text")
                    .attr("transform", `translate(${coords.x + spec.x}, ${coords.y + spec.y})`)
                    .attr("text-anchor", spec.anchor)
                    .attr("fill", "#0f172a")
                    .attr("fill", getPrimaryColor(node))
                    .attr("font-weight", 700)
                    .attr("font-size", "0.85rem")
                    .text(cleanLabel(node.data.name));
            });

            const leafNodeLabels = nodes.filter(d => d.depth > 1)
                .append("text")
                .attr("fill", "#0f172a")
                .attr("font-weight", 500)
                .attr("font-size", "0.72rem")
                .attr("dy", "0.35em");

            leafNodeLabels.each(function(d) {
                const anchor = d.x < 180 ? "start" : "end";
                const xOffset = 22;
                const lines = getLabelLines(d);
                const textSel = d3.select(this)
                    .attr("text-anchor", anchor)
                    .attr("transform", d.x >= 180 ? "rotate(180)" : null);

                textSel.selectAll("tspan")
                    .data(lines)
                    .enter()
                    .append("tspan")
                    .attr("x", anchor === "start" ? xOffset : -xOffset)
                    .attr("dy", (_, i) => i === 0 ? 0 : 12)
                    .text(line => line);
            });

            d3.select("#multi-agent-tooltip").remove();
            const tooltip = d3.select("body")
                .append("div")
                .attr("id", "multi-agent-tooltip")
                .attr("class", "multi-agent-tooltip")
                .style("opacity", 0);

            nodes.on("mouseenter", function(event, d) {
                const targetRadius = d.depth === 0 ? 38 : d.depth === 1 ? 24 : 14;
                d3.select(this).select("circle")
                    .transition()
                    .duration(200)
                    .attr("r", targetRadius);

                linkPaths.attr("stroke-opacity", link =>
                    (link.target === d || link.source === d || link.target === d.parent || link.source === d.parent) ? 0.85 : 0.15
                );

                tooltip.transition()
                    .duration(200)
                    .style("opacity", 1);

                tooltip.html(`
                    <strong>${d.data.name}</strong><br />
                    <span style="color:#64748b; font-size:0.85rem;">${d.data.description || 'Specialist agent supporting the orchestrator'}</span>
                `);
            })
            .on("mousemove", event => {
                tooltip
                    .style("left", `${event.pageX + 12}px`)
                    .style("top", `${event.pageY - 20}px`);
            })
            .on("mouseleave", function(event, d) {
                d3.select(this).select("circle")
                    .transition()
                    .duration(200)
                    .attr("r", () => {
                        if (d.depth === 0) return 34;
                        if (d.depth === 1) return 20;
                        return 11;
                    });

                linkPaths.attr("stroke-opacity", 0.5);

                tooltip.transition()
                    .duration(200)
                    .style("opacity", 0);
            });
        }


    // Update the tab switching to initialize the multi-agent chart
    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
            if (tab.dataset.tab === 'solution3') {
                setTimeout(() => {
                    drawMultimodalGraph();
                    drawMultiAgentSystem();
                }, 100);
            }
        });
    });

    // Update window resize handlers
    window.addEventListener('resize', function() {
        const solution3Active = document.getElementById('solution3').classList.contains('active');
        if (solution3Active) {
            drawMultimodalGraph();
            drawMultiAgentSystem();
        }
    });

    // Update the initial load to include multi-agent system
    window.addEventListener('load', function() {
        // Small delay to ensure the container is properly sized
        setTimeout(() => {
            const activeTab = document.querySelector('.tab.active');
            if (activeTab && activeTab.dataset.tab === 'solution3') {
                drawMultimodalGraph();
                drawMultiAgentSystem();
            }
        }, 100);
    });
        
        // Custom dropdown functionality
        const customSelectTrigger = document.getElementById('customSelectTrigger');
        const customSelectOptions = document.getElementById('customSelectOptions');
        const selectedText = document.getElementById('selectedText');
        const options = document.querySelectorAll('.custom-option');
        
        customSelectTrigger.addEventListener('click', function(e) {
            e.stopPropagation();
            customSelectTrigger.classList.toggle('open');
            customSelectOptions.classList.toggle('open');
        });
        
        options.forEach(option => {
            option.addEventListener('click', function(e) {
                e.stopPropagation();
                const value = this.getAttribute('data-value');
                const text = this.innerHTML;
                
                // Update selected text
                selectedText.innerHTML = text;
                
                // Remove selected class from all options
                options.forEach(opt => opt.classList.remove('selected'));
                
                // Add selected class to clicked option
                this.classList.add('selected');
                
                // Close dropdown
                customSelectTrigger.classList.remove('open');
                customSelectOptions.classList.remove('open');
                
                // Trigger the response update
                updateQueryResponse(value);
            });
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
            customSelectTrigger.classList.remove('open');
            customSelectOptions.classList.remove('open');
        });
        
        // ERP Query System with Specific Mining Queries
        function updateQueryResponse(query) {
            let response = "Select a mining operations query from the dropdown to see detailed AI analysis.";
            
            if (query === 'oil_sensor_anomaly') {
                response = `
                    <p><strong>Oil Contamination Anomaly Detection in Hydraulic Systems</strong></p>
                    <p>Real-time sensor analysis reveals contamination patterns across mining equipment:</p>
                    
                    <div class="response-details">
                        <table class="response-table">
                            <tr>
                                <th>Equipment ID</th>
                                <th>Oil Viscosity Index</th>
                                <th>Particle Count (ISO)</th>
                                <th>Water Content (%)</th>
                                <th>Anomaly Status</th>
                            </tr>
                            <tr>
                                <td>Excavator EX-204</td>
                                <td>92</td>
                                <td>18/16/13</td>
                                <td>0.08%</td>
                                <td>Normal</td>
                            </tr>
                            <tr>
                                <td>Crusher CR-118</td>
                                <td>76</td>
                                <td>22/20/17</td>
                                <td>0.34%</td>
                                <td>⚠️ Warning</td>
                            </tr>
                            <tr>
                                <td>Haul Truck HT-042</td>
                                <td>68</td>
                                <td>24/22/19</td>
                                <td>0.52%</td>
                                <td>🔴 Critical</td>
                            </tr>
                            <tr>
                                <td>Conveyor CV-301</td>
                                <td>88</td>
                                <td>19/17/14</td>
                                <td>0.12%</td>
                                <td>Normal</td>
                            </tr>
                        </table>
                        
                        <p><strong>AI Insights:</strong></p>
                        <ul>
                            <li>Haul Truck HT-042 shows <span class="metric-highlight">0.44% elevated water content</span> (acceptable threshold: 0.08%) - oil change recommended within 24 hours</li>
                            <li>Crusher CR-118 particle contamination at <span class="metric-highlight">ISO 22/20/17</span> exceeds target cleanliness of 19/17/14 - filter replacement needed within 72 hours</li>
                            <li>Implementing automated oil quality monitoring could reduce hydraulic failures by <span class="metric-highlight">15-20%</span></li>
                            <li>Projected maintenance cost reduction: <span class="metric-highlight">8-12% annually</span> through early contamination detection</li>
                        </ul>
                    </div>
                `;
            } else if (query === 'oil_degradation') {
                response = `
                    <p><strong>Oil Degradation Rate Analysis and Optimal Replacement Intervals</strong></p>
                    <p>Predictive modeling of oil degradation based on operating conditions and sensor trends:</p>
                    
                    <div class="response-details">
                        <table class="response-table">
                            <tr>
                                <th>Equipment Type</th>
                                <th>Current Interval (hrs)</th>
                                <th>Optimal Interval (hrs)</th>
                                <th>Degradation Rate</th>
                                <th>Potential Savings</th>
                            </tr>
                            <tr>
                                <td>Heavy Haul Trucks</td>
                                <td>500</td>
                                <td>575</td>
                                <td>0.12% per hour</td>
                                <td>12% reduction in oil costs</td>
                            </tr>
                            <tr>
                                <td>Underground LHD Loaders</td>
                                <td>750</td>
                                <td>820</td>
                                <td>0.08% per hour</td>
                                <td>7% reduction in oil costs</td>
                            </tr>
                            <tr>
                                <td>Crushing Equipment</td>
                                <td>400</td>
                                <td>420</td>
                                <td>0.15% per hour</td>
                                <td>4% reduction in oil costs</td>
                            </tr>
                            <tr>
                                <td>Conveyor Systems</td>
                                <td>1000</td>
                                <td>1100</td>
                                <td>0.05% per hour</td>
                                <td>8% reduction in oil costs</td>
                            </tr>
                        </table>
                        
                        <p><strong>Optimization Recommendations:</strong></p>
                        <ul>
                            <li>Heavy haul trucks are being serviced <span class="metric-highlight">15% more frequently than optimal</span> - extending intervals could reduce waste while maintaining reliability</li>
                            <li>Oil degradation accelerates by <span class="metric-highlight">20-25%</span> when operating temperatures exceed 85°C in underground conditions</li>
                            <li>Dynamic scheduling based on actual sensor data could reduce oil consumption by <span class="metric-highlight">8-10% fleet-wide</span></li>
                            <li>Annual environmental impact: <span class="metric-highlight">12% reduction</span> in used oil disposal volume</li>
                        </ul>
                    </div>
                `;
            } else if (query === 'oil_temp_correlation') {
                response = `
                    <p><strong>Oil Temperature and Equipment Performance Correlation Analysis</strong></p>
                    <p>Machine learning analysis reveals critical temperature thresholds affecting performance:</p>
                    
                    <div class="response-details">
                        <table class="response-table">
                            <tr>
                                <th>Temperature Range</th>
                                <th>Equipment Efficiency</th>
                                <th>Failure Risk</th>
                                <th>Fuel Consumption</th>
                                <th>Recommendation</th>
                            </tr>
                            <tr>
                                <td>40-60°C (Optimal)</td>
                                <td>100%</td>
                                <td>Low (2%)</td>
                                <td>Baseline</td>
                                <td>✅ Ideal range</td>
                            </tr>
                            <tr>
                                <td>60-75°C (Elevated)</td>
                                <td>97%</td>
                                <td>Medium (5%)</td>
                                <td>+3% above baseline</td>
                                <td>⚠️ Monitor closely</td>
                            </tr>
                            <tr>
                                <td>75-90°C (High)</td>
                                <td>91%</td>
                                <td>High (12%)</td>
                                <td>+7% above baseline</td>
                                <td>🔴 Cooling needed</td>
                            </tr>
                            <tr>
                                <td>90°C+ (Critical)</td>
                                <td>82%</td>
                                <td>Very High (22%)</td>
                                <td>+15% above baseline</td>
                                <td>🛑 Immediate action</td>
                            </tr>
                        </table>
                        
                        <p><strong>Performance Insights:</strong></p>
                        <ul>
                            <li>Equipment operating above 75°C shows <span class="metric-highlight">9% efficiency loss</span> and accelerated component wear</li>
                            <li><span class="metric-highlight">48%</span> of premature hydraulic failures occur in equipment with average oil temps above 80°C</li>
                            <li>Installing enhanced cooling systems on high-temperature units could improve efficiency by <span class="metric-highlight">6-8%</span></li>
                            <li>Maintaining optimal temperature range would reduce overall maintenance costs by <span class="metric-highlight">10-14%</span></li>
                        </ul>
                    </div>
                `;
            } else if (query === 'conveyor_failures') {
                response = `
                    <p><strong>Analysis of Conveyor System Failures at Vanscoy Site</strong></p>
                    <p>Our AI identified three primary failure patterns in the conveyor systems:</p>
                    
                    <div class="response-details">
                        <table class="response-table">
                            <tr>
                                <th>Failure Type</th>
                                <th>Frequency</th>
                                <th>Primary Cause</th>
                                <th>Impact</th>
                            </tr>
                            <tr>
                                <td>Bearing Failure</td>
                                <td>38% of incidents</td>
                                <td>Inadequate lubrication & potash dust contamination</td>
                                <td>8-16 hours downtime per incident</td>
                            </tr>
                            <tr>
                                <td>Belt Misalignment</td>
                                <td>32% of incidents</td>
                                <td>Material buildup & improper tensioning</td>
                                <td>4-6 hours downtime per incident</td>
                            </tr>
                            <tr>
                                <td>Motor Overheating</td>
                                <td>22% of incidents</td>
                                <td>Dust accumulation & cooling system degradation</td>
                                <td>3-5 hours downtime per incident</td>
                            </tr>
                        </table>
                        
                        <p><strong>Recommendations:</strong></p>
                        <ul>
                            <li>Implement automated lubrication system for critical bearings on high-usage conveyors</li>
                            <li>Install belt tracking sensors with automatic tensioning on primary conveyors</li>
                            <li>Upgrade motor cooling and dust protection on conveyors C-12 through C-18</li>
                            <li>Expected reduction in failures: <span class="metric-highlight">25-30%</span> with estimated <span class="metric-highlight">12-15% reduction in conveyor maintenance costs</span></li>
                        </ul>
                    </div>
                `;
            } else if (query === 'conveyor_bearing_prediction') {
                response = `
                    <p><strong>Conveyor Bearing Failure Prediction Analysis</strong></p>
                    <p>Advanced vibration and thermal analysis predicts bearing failures across conveyor systems:</p>
                    
                    <div class="response-details">
                        <table class="response-table">
                            <tr>
                                <th>Conveyor ID</th>
                                <th>Vibration Level (mm/s)</th>
                                <th>Bearing Temp (°C)</th>
                                <th>Predicted Failure</th>
                                <th>Risk Level</th>
                            </tr>
                            <tr>
                                <td>CV-301 North</td>
                                <td>2.8</td>
                                <td>62°C</td>
                                <td>87 days</td>
                                <td>Low</td>
                            </tr>
                            <tr>
                                <td>CV-118 Central</td>
                                <td>7.2</td>
                                <td>78°C</td>
                                <td>12 days</td>
                                <td>🔴 Critical</td>
                            </tr>
                            <tr>
                                <td>CV-205 South</td>
                                <td>4.5</td>
                                <td>71°C</td>
                                <td>35 days</td>
                                <td>⚠️ High</td>
                            </tr>
                            <tr>
                                <td>CV-412 East</td>
                                <td>3.1</td>
                                <td>64°C</td>
                                <td>78 days</td>
                                <td>Medium</td>
                            </tr>
                        </table>
                        
                        <p><strong>Predictive Insights:</strong></p>
                        <ul>
                            <li>CV-118 shows <span class="metric-highlight">140% elevated vibration</span> compared to baseline - bearing replacement recommended before next planned shutdown</li>
                            <li>Thermal patterns indicate <span class="metric-highlight">lubrication degradation</span> in CV-205 and CV-412 - schedule oil sampling</li>
                            <li>Predictive maintenance scheduling could prevent <span class="metric-highlight">60-70%</span> of unplanned conveyor shutdowns</li>
                            <li>Estimated downtime reduction: <span class="metric-highlight">18-22% annually</span> through early intervention</li>
                        </ul>
                    </div>
                `;
            } else if (query === 'crusher_wear_prediction') {
                response = `
                    <p><strong>Crusher Liner Wear Prediction and Replacement Optimization</strong></p>
                    <p>Machine learning models forecast liner wear patterns to optimize replacement intervals:</p>
                    
                    <div class="response-details">
                        <table class="response-table">
                            <tr>
                                <th>Crusher Unit</th>
                                <th>Current Wear (%)</th>
                                <th>Wear Rate (% per day)</th>
                                <th>Optimal Replacement</th>
                                <th>Production Impact</th>
                            </tr>
                            <tr>
                                <td>Primary Crusher C-01</td>
                                <td>65%</td>
                                <td>1.2%/day</td>
                                <td>24 days</td>
                                <td>Normal operation</td>
                            </tr>
                            <tr>
                                <td>Secondary Crusher C-02</td>
                                <td>78%</td>
                                <td>1.8%/day</td>
                                <td>10 days</td>
                                <td>⚠️ Reduced throughput</td>
                            </tr>
                            <tr>
                                <td>Tertiary Crusher C-03</td>
                                <td>42%</td>
                                <td>0.9%/day</td>
                                <td>58 days</td>
                                <td>Optimal performance</td>
                            </tr>
                            <tr>
                                <td>Primary Crusher C-04</td>
                                <td>88%</td>
                                <td>2.2%/day</td>
                                <td>5 days</td>
                                <td>🔴 Critical - schedule now</td>
                            </tr>
                        </table>
                        
                        <p><strong>Optimization Recommendations:</strong></p>
                        <ul>
                            <li>C-04 requires <span class="metric-highlight">scheduled shutdown within 5 days</span> - coordinate with production planning to minimize impact</li>
                            <li>Coordinating C-02 and C-04 replacements during next planned maintenance could reduce overall downtime by <span class="metric-highlight">18-22%</span></li>
                            <li>Wear rate analysis indicates <span class="metric-highlight">harder ore composition</span> from Zone 2A affecting C-02 liner life</li>
                            <li>Predictive scheduling optimizes liner life by <span class="metric-highlight">6-9%</span> and reduces replacement costs by <span class="metric-highlight">8-12% annually</span></li>
                        </ul>
                    </div>
                `;
            } else if (query === 'maintenance_backlog') {
                response = `
                    <p><strong>Maintenance Backlog Analysis and Resource Allocation</strong></p>
                    <p>Current maintenance backlog shows critical patterns requiring attention:</p>
                    
                    <div class="response-details">
                        <table class="response-table">
                            <tr>
                                <th>Equipment Category</th>
                                <th>Backlog (Hours)</th>
                                <th>Critical Items</th>
                                <th>Avg. Delay (Days)</th>
                                <th>Risk Level</th>
                            </tr>
                            <tr>
                                <td>Crushing Systems</td>
                                <td>385</td>
                                <td>3</td>
                                <td>12</td>
                                <td>High</td>
                            </tr>
                            <tr>
                                <td>Conveyor Systems</td>
                                <td>240</td>
                                <td>2</td>
                                <td>18</td>
                                <td>Medium</td>
                            </tr>
                            <tr>
                                <td>Haul Trucks</td>
                                <td>520</td>
                                <td>4</td>
                                <td>22</td>
                                <td>High</td>
                            </tr>
                            <tr>
                                <td>Processing Equipment</td>
                                <td>165</td>
                                <td>1</td>
                                <td>9</td>
                                <td>Low</td>
                            </tr>
                        </table>
                        
                        <p><strong>Resource Allocation Insights:</strong></p>
                        <ul>
                            <li><span class="metric-highlight">55%</span> of critical maintenance items are concentrated in 25% of equipment</li>
                            <li>Cross-training maintenance teams could reduce backlog by <span class="metric-highlight">12-15%</span> within 3 months</li>
                            <li>Implementing predictive maintenance could prevent <span class="metric-highlight">25-30%</span> of current backlog items from becoming critical</li>
                            <li>Recommended reallocation of 2 technicians from low-priority to high-priority maintenance tasks</li>
                        </ul>
                    </div>
                `;
            } else if (query === 'ground_stability_risk') {
                response = `
                    <p><strong>Ground Stability & Fall of Ground Risk Assessment</strong></p>
                    <p>Multi-sensor AI analysis of rock mass stability and fall of ground (FoG) risks across active mining sections:</p>
                    
                    <div class="response-details">
                        <table class="response-table">
                            <tr>
                                <th>Location / Zone</th>
                                <th>Risk Level</th>
                                <th>Critical Change Indicators</th>
                                <th>Predicted FoG Probability (30d)</th>
                            </tr>
                            <tr>
                                <td>Section K3-7, Primary Haulage</td>
                                <td><span class="priority-high">CRITICAL</span></td>
                                <td>Seismic energy +220%, crack propagation +400% (14 days)</td>
                                <td>34%</td>
                            </tr>
                            <tr>
                                <td>Panel K3-12, Production Zone</td>
                                <td><span class="priority-high">HIGH</span></td>
                                <td>Stress pillar deformation, microseismic clustering</td>
                                <td>18%</td>
                            </tr>
                            <tr>
                                <td>Access Drift to Shaft B</td>
                                <td><span class="priority-medium">MEDIUM</span></td>
                                <td>Increased moisture seepage correlating with stress maps</td>
                                <td>7%</td>
                            </tr>
                        </table>
                        
                        <p><strong>Critical Safety Findings:</strong></p>
                        <ul>
                            <li><span class="metric-highlight">Section K3-7</span>: Shows <span class="metric-highlight">400% increase</span> in microfracture propagation over 14 days—most rapid degradation trend recorded in this shaft</li>
                            <li>Seismic monitoring arrays detected <span class="metric-highlight">220% rise</span> in low-magnitude seismic events, concentrated in pattern consistent with impending slab failure</li>
                            <li>AI cross-referenced data with recent incident patterns, finding <span class="metric-highlight">91% correlation</span> in pre-collapse signal characteristics</li>
                            <li>Current ground support in K3-7 rated for historical conditions and may be under-specified for current accelerated stress regime</li>
                        </ul>
                        
                        <p><strong>Safety & Operational Impact Assessment:</strong></p>
                        <ul>
                            <li><strong>Personnel at Direct Risk:</strong> Up to 63 miners and technicians work in or traverse high-risk K3-7 section during standard shift cycle</li>
                            <li><strong>Production Impact:</strong> Significant FoG event would trigger immediate regulatory inspection, potentially halting operations in affected area for <span class="metric-highlight">2-4 weeks minimum</span></li>
                            <li><strong>Capacity Loss:</strong> Could result in <span class="metric-highlight">~15% loss of site production capacity</span> during investigation and remediation period</li>
                            <li><strong>Historical Context:</strong> Industry data shows major FoG events lead to extended shutdowns, regulatory scrutiny, and allocation impacts</li>
                        </ul>
                        
                        <p><strong>AI-Recommended Mitigation Actions:</strong></p>
                        <ul>
                            <li><strong>IMMEDIATE (0-24h):</strong> Restrict access to <span class="metric-highlight">Section K3-7</span>. Deploy ground-penetrating radar for mapping; review before next shift.</li>
                            <li><strong>SHORT-TERM (72h):</strong> Install 50 additional <span class="metric-highlight">resin-grouted bolts</span> and mesh in a specified high-risk pattern. Launch a live stability dashboard.</li>
                            <li><strong>MEDIUM-TERM (14 days):</strong> Execute three prescribed destressing blasts. Redesign support plan to use 3m cable bolts in the haulage crown.</li>
                            <li><strong>LONG-TERM (30 days):</strong> Link the stability dashboard to personnel tracking for automated evacuation alarms if risk exceeds <span class="metric-highlight">threshold 75</span>.</li>
                        </ul>
                        
                        <p style="background: rgba(239, 68, 68, 0.08); padding: 15px; border-left: 4px solid #ef4444; border-radius: 8px; margin-top: 15px;">
                            <strong>⚠️ Value Proposition:</strong> Proactive AI-driven intervention prevents potential fatalities, avoids multi-week production shutdowns, and maintains operational continuity—critical for allocation reliability and stakeholder confidence. Ground stability monitoring directly addresses the type of incidents that have historically impacted operational performance industry-wide.
                        </p>
                    </div>
                `;
            } else if (query === 'machine_safety_compliance') {
                response = `
                    <p><strong>Machine Safety & LOTO Compliance Monitoring</strong></p>
                    <p>AI analysis of video and sensor data for critical safety procedure adherence around processing equipment:</p>
                    
                    <div class="response-details">
                        <table class="response-table">
                            <tr>
                                <th>Equipment / Location</th>
                                <th>Hazard Level</th>
                                <th>Primary Compliance Issue</th>
                                <th>Frequency (7 days)</th>
                            </tr>
                            <tr>
                                <td>Ribbon Blender #4, Line 3</td>
                                <td><span class="priority-high">CRITICAL</span></td>
                                <td>Guard removed during active cleaning cycle; LOTO not applied</td>
                                <td>3 violations (Severe)</td>
                            </tr>
                            <tr>
                                <td>Crusher #7, Maintenance Bay</td>
                                <td><span class="priority-high">HIGH</span></td>
                                <td>Entry into red zone while equipment in maintenance mode but not fully isolated</td>
                                <td>12 violations (High)</td>
                            </tr>
                            <tr>
                                <td>Conveyor Drive #12</td>
                                <td><span class="priority-medium">MEDIUM</span></td>
                                <td>Safety interlock bypass attempts via manual override</td>
                                <td>9 attempts (Medium)</td>
                            </tr>
                        </table>
                        
                        <p><strong>Critical Safety Findings:</strong></p>
                        <ul>
                            <li><span class="metric-highlight">Blender #4</span> operations show repeat violation pattern: guards removed to speed cleaning, creating exposure to rotating equipment hazards</li>
                            <li>LOTO compliance is <span class="metric-highlight">below 60%</span> for non-routine maintenance tasks, indicating systemic procedural breakdown</li>
                            <li>AI behavioral analysis identifies that pressure to minimize downtime is strongest correlating factor with safety procedure shortcuts</li>
                            <li>Current safeguards (reliance on human supervision, periodic audits) show <span class="metric-highlight">limited effectiveness</span> at preventing real-time violations</li>
                        </ul>
                        
                        <p><strong>Incident Risk & Regulatory Analysis:</strong></p>
                        <ul>
                            <li><strong>Imminent Risk:</strong> Conditions around Blender #4 are statistically similar to patterns preceding serious industry incidents; AI assigns <span class="metric-highlight">high probability</span> of lost-time incident within 90 days if practices continue</li>
                            <li><strong>Personnel Exposure:</strong> 18 maintenance technicians and 9 production operators routinely work with identified high-risk equipment</li>
                            <li><strong>Regulatory Consequences:</strong> Repeat violations could be classified as "Willful," leading to enhanced penalties and potential external oversight requirements</li>
                            <li><strong>Cultural Impact:</strong> Persistent unaddressed violations erode safety culture, signaling that production timelines consistently outweigh safety protocols</li>
                        </ul>
                        
                        
                        <p><strong>AI-Recommended Safety Actions:</strong></p>
                        <ul>
                            <li><strong>IMMEDIATE (0-4h):</strong> Safety stand-down for <span class="metric-highlight">Blender #4</span>. Restart only after photo-verified guard check and fresh, audited LOTO permit.</li>
                            <li><strong>SHORT-TERM (24h):</strong> Install AI vision cameras to detect guard removal; send alerts with video clip to supervisors.</li>
                            <li><strong>MEDIUM-TERM (7 days):</strong> Integrate cameras with LOTO system to auto-lock equipment if guard is removed without a valid permit.</li>
                            <li><strong>LONG-TERM (30 days):</strong> Redesign maintenance schedules with a <span class="metric-highlight">15% time buffer</span> for high-risk tasks. Implement recognition for perfect compliance.</li>
                        </ul>
                        
                        <p style="background: rgba(239, 68, 68, 0.08); padding: 15px; border-left: 4px solid #ef4444; border-radius: 8px; margin-top: 15px;">
                            <strong>⚠️ Value Proposition:</strong> AI system acts as 24/7 digital safety observer, enforcing procedural adherence and protecting workers. Provides management with objective data to break cycles of compliance failures before serious incidents occur. Maintaining strong safety records is essential for operational continuity, regulatory standing, and stakeholder confidence.
                        </p>
                    </div>
                `;
            } else if (query === 'process_safety_incident') {
                response = `
                    <div class="response-container">
                        <p><strong>Post-Incident Forensic Analysis & System Learning</strong></p>
                        <p>AI reconstruction and root cause analysis of the Faustina Plant Tier-2 vapor release event:</p>
                        
                        <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                            <thead>
                                <tr style="background: rgba(239, 68, 68, 0.1);">
                                    <th style="padding: 12px; text-align: left; border: 1px solid #e5e7eb;">System Component</th>
                                    <th style="padding: 12px; text-align: left; border: 1px solid #e5e7eb;">Status at T-0 (Alarm)</th>
                                    <th style="padding: 12px; text-align: left; border: 1px solid #e5e7eb;">Deviation from Standard</th>
                                    <th style="padding: 12px; text-align: left; border: 1px solid #e5e7eb;">Contribution to Failure Chain</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;"><strong>Main Feed Valve (FCV-112)</strong></td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;">Stuck at 82% open</td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;">Failed closed command from controller</td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;"><span class="metric-highlight">Primary Initiating Cause</span></td>
                                </tr>
                                <tr style="background: rgba(0, 0, 0, 0.02);">
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;"><strong>Pressure Safety System (PSV-205)</strong></td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;">48-minute delay to actuation</td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;">Calibration drift exceeding limits</td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;"><span class="metric-highlight">Critical Escalation Factor</span></td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;"><strong>Operator Console Alert</strong></td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;">Logged at T-0</td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;">No audible alarm triggered</td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;">Software configuration error</td>
                                </tr>
                                <tr style="background: rgba(0, 0, 0, 0.02);">
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;"><strong>Unit ESD Sequence</strong></td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;">Auto-initiated at T+3min</td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;">Bypassed pre-purge step</td>
                                    <td style="padding: 10px; border: 1px solid #e5e7eb;">Design flaw in logic tree</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <p><strong>Critical Incident Reconstruction:</strong></p>
                        <ul>
                            <li><strong>Root Cause Chain:</strong> Mechanical failure of FCV-112 (40% probability) combined with a latent calibration failure of PSV-205 (60% probability) created a "double failure" scenario that overwhelmed basic process controls</li>
                            <li><strong>Systemic & Human Factors:</strong> The AI cross-referenced maintenance logs and found FCV-112 was <span class="metric-highlight">4 months overdue</span> for its predictive maintenance service. The PSV-205 calibration drift had been slowly trending for <span class="metric-highlight">90 days</span> but never breached the static alert threshold until failure</li>
                            <li><strong>Response Analysis:</strong> While the ESD activated, the missing pre-purge step extended the vapor cloud duration by approximately <span class="metric-highlight">8 minutes</span>. Perimeter sensors confirmed the cloud was contained within the primary bund, validating the effectiveness of physical controls but not procedural ones</li>
                        </ul>
                        
                        <p><strong>Safety & Operational Impact Assessment:</strong></p>
                        <ul>
                            <li><strong>Production & Capacity Impact:</strong> The incident resulted in a full-unit shutdown for one production cycle, directly reducing quarterly site output by an estimated <span class="metric-highlight">1.5-2.5%</span>. A recurrence with community impact could lead to a regulatory production curtailment of <span class="metric-highlight">15-25%</span> for multiple quarters.</li>
                            <li><strong>Regulatory & Efficiency Risk:</strong> A Tier-2 reportable event typically triggers <span class="metric-highlight">200-300% more inspection hours</span> from agencies like OSHA/EPA over the following year, diverting significant management and technical resources. Manual root cause investigations for such events historically take <span class="metric-highlight">3-5 weeks to close</span>.</li>
                            <li><strong>Systemic Exposure:</strong> The identified "double failure" pattern indicates a potential <span class="metric-highlight">70% higher risk</span> of similar overpressure events in 3 other process units with identical valve and relief system configurations.</li>
                        </ul>
                        
                        <p><strong>AI-Recommended Mitigation & Learning Actions:</strong></p>
                        <ul>
                            <li><strong>IMMEDIATE (0-24h):</strong> Manually verify FCV-112 position & PSV-205 pressure <span class="metric-highlight">every 2 hours</span> (dual sign-off). Re-configure the Tier-2 alarm to trigger audible horn and forced console acknowledgment.</li>
                            <li><strong>SHORT-TERM (72h):</strong> Update FCV-112 predictive maintenance to require valve signature analysis. Modify PSV-205 calibration to alert on <span class="metric-highlight">1% drift over 30 days</span>. Correct the ESD logic to require confirmed pre-purge before venting.</li>
                            <li><strong>MEDIUM-TERM (14 days):</strong> Run "Dual Barrier Failure" HAZOP revalidation for Units 4, 7, 9. Launch a "Latent Condition Dashboard" for management.</li>
                            <li><strong>LONG-TERM (30 days):</strong> Run 50 "double failure" simulations on the <span class="metric-highlight">digital twin</span> to identify the next highest-risk valve/PSV pairs.</li>
                        </ul>
                        
                        <p style="background: rgba(239, 68, 68, 0.08); padding: 15px; border-left: 4px solid #ef4444; border-radius: 8px; margin-top: 15px;">
                            <strong>⚠️ Value Proposition:</strong> This AI-driven mitigation turns a single incident into organization-wide learning. It closes specific technical gaps and, more importantly, upgrades the entire safety management system by identifying and fixing latent flaws in procedures, maintenance, and design logic, preventing the next incident before the precursor occurs.
                        </p>
                    </div>
                `;
            }
            
            document.getElementById('aiResponse').innerHTML = response;
        }
        
        // Initialize causal graph when the page loads
        window.addEventListener('load', function() {
            // Small delay to ensure the container is properly sized
            setTimeout(drawCausalGraph, 100);
            // Initialize multimodal graph if on solution 3
            const activeTab = document.querySelector('.tab.active');
            if (activeTab && activeTab.dataset.tab === 'solution3') {
                setTimeout(drawMultimodalGraph, 100);
            }
        });
        
        // Redraw multimodal graph on window resize
        window.addEventListener('resize', function() {
            const solution3Active = document.getElementById('solution3').classList.contains('active');
            if (solution3Active) {
                drawMultimodalGraph();
            }
        });
    </script>
</body>
</html>
